# ------------------------------------------------------------------------------
# Copyright 2012-2021 Aerospike, Inc.
#
# Portions may be licensed to Aerospike, Inc. under one or more contributor
# license agreements.
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may not
# use this file except in compliance with the License. You may obtain a copy of
# the License at http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations under
# the License.
# ------------------------------------------------------------------------------

{{- if .Values.enableAerospikeMonitoring }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-grafana-config
  namespace: {{ .Release.Namespace }}
  labels:
    app: {{ template "aerospike.name" . }}-grafana
    chart: {{ .Chart.Name }}
    release: {{ .Release.Name }}
    app.kubernetes.io/component: grafana
data:
  grafana.ini: |
    [analytics]
    check_for_updates = true
    [grafana_net]
    url = https://grafana.net
    [log]
    mode = console
    [paths]
    data = /var/lib/grafana/data
    logs = /var/log/grafana
    plugins = /var/lib/grafana/plugins
    [server]
    http_port = {{ .Values.grafana.httpPort | default 3000 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-grafana-dashboards
  namespace: {{ .Release.Namespace }}
  labels:
    app: {{ template "aerospike.name" . }}-grafana
    chart: {{ .Chart.Name }}
    release: {{ .Release.Name }}
    app.kubernetes.io/component: grafana
data:
  alerts.json: |
    {"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"7.2.1"},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"table-old","name":"Table (old)","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1602891686933,"links":[],"panels":[{"columns":[],"datasource":"${DS_AEROSPIKE_PROMETHEUS}","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fontSize":"100%","gridPos":{"h":24,"w":24,"x":0,"y":0},"id":85,"links":[],"pageSize":null,"scroll":true,"showHeader":true,"sort":{"col":0,"desc":true},"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"date"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"__name__","thresholds":[],"type":"hidden","unit":"short"},{"alias":"Alert Name","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"alertname","thresholds":[],"type":"string","unit":"short"},{"alias":"Alert State","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"alertstate","preserveFormat":false,"sanitize":false,"thresholds":[""],"type":"string","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"build","thresholds":[],"type":"hidden","unit":"short"},{"alias":"Cluster Name","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"cluster_name","thresholds":[],"type":"string","unit":"short"},{"alias":"Exporter Instance","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"instance","thresholds":[],"type":"string","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"job","thresholds":[],"type":"hidden","unit":"short"},{"alias":"Aerospike Instance","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"service","thresholds":[],"type":"string","unit":"short"},{"alias":"Severity","align":"auto","colorMode":"row","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"mappingType":1,"pattern":"severity","thresholds":["2","4"],"type":"string","unit":"short","valueMaps":[{"text":"Info","value":"1"},{"text":"Warning","value":"2"},{"text":"High","value":"3"},{"text":"Critical","value":"4"}]},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Value","thresholds":[],"type":"hidden","unit":"short"},{"alias":"Namespace","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"ns","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"ALERTS{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\", severity=~\"$severity|$^\", alertstate=~\"$state|$^\",}","format":"table","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Alerts","transform":"table","type":"table-old"}],"refresh":"1m","schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","hide":0,"includeAll":true,"label":"Cluster","multi":true,"name":"cluster","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","hide":0,"includeAll":true,"label":"Node","multi":true,"name":"node","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"hide":0,"includeAll":true,"label":"Severity","multi":true,"name":"severity","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"1","value":"1"},{"selected":false,"text":"2","value":"2"},{"selected":false,"text":"3","value":"3"},{"selected":false,"text":"4","value":"4"}],"query":"1,2,3,4","queryValue":"","skipUrlSync":false,"type":"custom"},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"hide":0,"includeAll":true,"label":"Alert State","multi":true,"name":"state","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"firing","value":"firing"},{"selected":false,"text":"pending","value":"pending"}],"query":"firing,pending","queryValue":"","skipUrlSync":false,"type":"custom"},{"current":{"selected":true,"text":"Aerospike Prometheus","value":"Aerospike Prometheus"},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"DS_AEROSPIKE_PROMETHEUS","options":[],"query":"prometheus","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Alerts","uid":"0bMepuvZz","version":1}

  cluster.json: |
    {"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"7.2.2"},{"type":"panel","id":"graph","name":"Graph","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""},{"type":"panel","id":"text","name":"Text","version":"7.1.0"}],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","limit":100,"name":"Annotations & Alerts","showIn":0,"tags":[],"type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1603366846449,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":26,"panels":[],"title":"Overview","type":"row"},{"cacheTimeout":null,"content":"<center><h2>$cluster<\/h1><\/center>","datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Cluster name","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":3,"w":6,"x":0,"y":1},"id":35,"links":[],"mode":"html","options":{"content":"<center><h1 style=\"color:#299c46;\">$cluster<\/h1><\/center>","mode":"html"},"pluginVersion":"7.1.0","targets":[{"expr":"min(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"intervalFactor":1,"legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Cluster Name","type":"text"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Cluster size","fieldConfig":{"defaults":{"custom":{},"mappings":[{"from":"","id":1,"text":"N\/A","to":"","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":1},"id":4,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_node_up{job=\"aerospike\", cluster_name=~\"$cluster\"})","format":"time_series","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Cluster Size","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace stop_writes flag","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":12,"y":1},"id":14,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_stop_writes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Stop Writes","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Total migration partitions remaining (transmit + receive)","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":18,"y":1},"id":16,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_migrate_rx_partitions_remaining{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) + sum(aerospike_namespace_migrate_tx_partitions_remaining{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Migrations Remaining","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Build version","fieldConfig":{"defaults":{"custom":{},"decimals":0,"mappings":[],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"string"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":0,"y":4},"id":36,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"\/^build$\/","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"aerospike_node_up{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"table","instant":true,"intervalFactor":1,"legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Aerospike Version","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Alert count","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"0","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":4},"id":5,"interval":null,"links":[{"targetBlank":true,"title":"Alerts","url":"\/d\/0bMepuvZz\/alerts"}],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"count(ALERTS{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Alerts","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace clock_skew_stop_writes flag","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":12,"y":4},"id":15,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_clock_skew_stop_writes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Clock Skew Stop Writes","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Dead Partitions in an strong consistent namespace","fieldConfig":{"defaults":{"custom":{},"mappings":[],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":18,"y":4},"id":65,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_unavailable_partitions{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Unavailable Partitions","refId":"B"},{"expr":"sum(aerospike_namespace_dead_partitions{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Dead Paritions","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Unavailable \/ Dead Partitions","type":"stat"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":7},"id":38,"panels":[],"title":"Node Statstics","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Client connection count","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":8},"hiddenSeries":false,"hideTimeOverride":false,"id":33,"interval":"","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_client_connections{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Client Connections","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Cluster size (cluster_size)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":8},"hiddenSeries":false,"hideTimeOverride":false,"id":41,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_cluster_size{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cluster Size","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":16},"id":62,"panels":[],"title":"Resources (Memory)","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Amount of memory in in-use pages (heap_active_kbytes)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":17},"hiddenSeries":false,"hideTimeOverride":false,"id":66,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_heap_active_kbytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Active Heap Memory","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"kbytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Heap allocated memory (heap_allocated_kbytes)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":17},"hiddenSeries":false,"hideTimeOverride":false,"id":43,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_heap_allocated_kbytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Allocated Heap Memory","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"kbytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Heap mapped memory (heap_mapped_kbytes)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":17},"hiddenSeries":false,"hideTimeOverride":false,"id":44,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_heap_mapped_kbytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Mapped Memory","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"kbytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Heap efficiency % (heap_efficiency_pct)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":25},"hiddenSeries":false,"hideTimeOverride":false,"id":45,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_heap_efficiency_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Heap Efficiency","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"percent","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Percentage of free system memory available","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":25},"hiddenSeries":false,"hideTimeOverride":false,"id":70,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_system_free_mem_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Free System Memory","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"percent","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":33},"id":69,"panels":[],"title":"Resources (CPU)","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Percentage of CPU usage by the asd process.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":34},"hiddenSeries":false,"hideTimeOverride":false,"id":71,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_process_cpu_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"ASD CPU usage","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"percent","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Percentage of CPU usage by all running processes.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":34},"hiddenSeries":false,"hideTimeOverride":false,"id":73,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_system_total_cpu_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total CPU usage","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"percent","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Percentage of CPU usage by processes running in kernel mode.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":34},"hiddenSeries":false,"hideTimeOverride":false,"id":72,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_system_kernel_cpu_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Kernel mode CPU usage","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"percent","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Percentage of CPU usage by processes running in user mode.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":42},"hiddenSeries":false,"hideTimeOverride":false,"id":74,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_system_user_cpu_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"User mode CPU usage","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"percent","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":50},"id":28,"panels":[],"title":"Throughput (Batch)","type":"row"},{"content":" \n\n### For namespace specific throughput please see the [Namespace View dashboard](\/d\/zGcUKcDZz\/namespace-view).","datasource":null,"description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":2,"w":24,"x":0,"y":51},"id":64,"links":[{"title":"Namespace View","url":"\/d\/zGcUKcDZz\/namespace-view"}],"mode":"markdown","options":{"content":"<br\/>\n<center><h2 style=\"color:#D11372;\">See <a href=\"\/d\/zGcUKcDZz\/namespace-vitew\">Namespace View dashboard<\/a> for namespace and transaction type specific TPS and Latency<\/h2><\/center>","mode":"html"},"pluginVersion":"7.1.0","timeFrom":null,"timeShift":null,"title":"","type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Batch Index TPS shows per-second average rate of increase in\n\n1. Total = batch_index_complete\n2. Successful = batch_index_complete - (batch_index_timeout + batch_index_error)\n3. Timeout = batch_index_timeout\n4. Error = batch_index_error","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":9,"w":24,"x":0,"y":53},"hiddenSeries":false,"hideTimeOverride":false,"id":17,"interval":"","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_node_stats_batch_index_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}: Total","refId":"B"},{"expr":"rate(aerospike_node_stats_batch_index_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m]) - (rate(aerospike_node_stats_batch_index_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m]) + rate(aerospike_node_stats_batch_index_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m]))","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}: Successful","refId":"A"},{"expr":"rate(aerospike_node_stats_batch_index_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}: Timeout","refId":"C"},{"expr":"rate(aerospike_node_stats_batch_index_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}: Error","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Batch Reads (TPS)","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"TPS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"TPS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","hide":0,"includeAll":false,"label":"Cluster","multi":false,"name":"cluster","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","hide":0,"includeAll":true,"label":"Node","multi":true,"name":"node","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },ns)","hide":0,"includeAll":true,"label":"Namespace","multi":true,"name":"namespace","options":[],"query":"label_values(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },ns)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"Aerospike Prometheus","value":"Aerospike Prometheus"},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"DS_AEROSPIKE_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Cluster Overview","uid":"dR0dDRHWz","version":1}

  latency.json: |
    {"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"7.2.2"},{"type":"panel","id":"graph","name":"Graph","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"}],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1603381556406,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":2,"panels":[],"repeat":"operation","title":"$operation","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"$operation latency","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":9,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":5,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(aerospike_latencies_${operation}_${latencytimeunit}_bucket{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\", le=~\"[0-9]*\"}) by (le,ns,service)","hide":false,"instant":false,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }} : <= {{ "{{" }}le{{ "}}" }}${latencytimeunit}","refId":"A"},{"expr":"avg(aerospike_latencies_${operation}_${latencytimeunit}_count{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (le,ns,service)","hide":false,"instant":false,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }} : ops\/sec","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Latency $operation","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Ops\/sec","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"Ops\/sec","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"90th percentile of $operation request durations over the last 1m","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":9,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":9,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.9,rate(aerospike_latencies_${operation}_${latencytimeunit}_bucket{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m]))","legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Histogram Quantile 90% $operation ($latencytimeunit)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","hide":0,"includeAll":false,"label":"Cluster","multi":false,"name":"cluster","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","hide":0,"includeAll":true,"label":"Node","multi":true,"name":"node","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },ns)","hide":0,"includeAll":true,"label":"Namespace","multi":true,"name":"namespace","options":[],"query":"label_values(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },ns)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"metrics(aerospike_latencies_)","hide":0,"includeAll":true,"label":"Operation","multi":true,"name":"operation","options":[],"query":"metrics(aerospike_latencies_)","refresh":2,"regex":"\/.*aerospike_latencies_([a-z]*)_[a-z]*_count\/","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"metrics(aerospike_latencies_)","hide":0,"includeAll":false,"label":"Latency Time Unit","multi":false,"name":"latencytimeunit","options":[],"query":"metrics(aerospike_latencies_)","refresh":2,"regex":"\/.*aerospike_latencies_[a-z]*_([a-z]*)_count\/","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"Aerospike Prometheus","value":"Aerospike Prometheus"},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"DS_AEROSPIKE_PROMETHEUS","options":[],"query":"prometheus","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Latency View","uid":"ZoeGW1DBk","version":1}

  namespace.json: |
    {"__requires":[{"type":"panel","id":"bargauge","name":"Bar gauge","version":""},{"type":"grafana","id":"grafana","name":"Grafana","version":"7.2.2"},{"type":"panel","id":"graph","name":"Graph","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1603448491597,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":24,"panels":[],"repeat":"namespace","title":"Namespace: $namespace","type":"row"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Migrations remaining - migrate_rx_partitions_remaining (transmit) migrate_tx_partitions_remaining (receive)","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-orange","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":1},"id":333,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_migrate_tx_partitions_remaining{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"TX","refId":"C"},{"expr":"sum(aerospike_namespace_migrate_rx_partitions_remaining{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"RX","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Migrations Remaining","type":"stat"},{"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace memory usage in percentage","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{},"decimals":0,"mappings":[{"from":"","id":1,"text":"N\/A","to":"","type":1,"value":"null"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-orange","value":80},{"color":"dark-red","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":1},"id":321,"links":[],"options":{"displayMode":"lcd","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true},"pluginVersion":"7.2.2","targets":[{"expr":"avg(100-aerospike_namespace_memory_free_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"% Memory Used","type":"bargauge"},{"aliasColors":{"High Water Mark":"semi-dark-orange","Stop Writes":"dark-red","Used %":"blue"},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace memory trend (Used % vs HWM %)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":6,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":49,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(100-aerospike_namespace_memory_free_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","intervalFactor":1,"legendFormat":"Memory Used %","refId":"A"},{"expr":"avg(aerospike_namespace_high_water_memory_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","intervalFactor":1,"legendFormat":"Memory High Water Mark %","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"% Memory Trend","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace free memory ((memory_free_pct \/ 100) * memory_size) in bytes\n\nNamespace total memory (memory_size) in bytes","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":4},"id":68,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"avg(aerospike_namespace_memory_size{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})*(avg(aerospike_namespace_memory_free_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})\/100)","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Memory Free","refId":"A"},{"expr":"avg(aerospike_namespace_memory_size{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Memory Total","refId":"B"}],"timeFrom":null,"timeShift":null,"title":"Namespace Memory Statistics","type":"stat"},{"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace objects (tombstones, master_objects, prole_objects, evicted_objects)","fieldConfig":{"defaults":{"custom":{},"links":[],"mappings":[{"from":"","id":1,"text":"N\/A","to":"","type":1,"value":"null"}],"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":0,"y":5},"id":100,"links":[],"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_tombstones{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","intervalFactor":1,"legendFormat":"Tombstones","refId":"C"},{"expr":"sum(aerospike_namespace_evicted_objects{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","intervalFactor":1,"legendFormat":"Evicted objects","refId":"D"},{"expr":"sum(aerospike_namespace_prole_objects{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","intervalFactor":1,"legendFormat":"Replica objects","refId":"B"},{"expr":"sum(aerospike_namespace_master_objects{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","intervalFactor":1,"legendFormat":"Master objects","refId":"A"},{"expr":"sum(aerospike_namespace_expired_objects{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","intervalFactor":1,"legendFormat":"Expired objects","refId":"E"}],"timeFrom":null,"timeShift":null,"title":"Objects","type":"stat"},{"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace storage usage in percentage","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{},"decimals":0,"mappings":[{"from":"","id":1,"text":"N\/A","to":"","type":1,"value":"null"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-orange","value":80},{"color":"dark-red","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":7},"id":31,"links":[],"options":{"displayMode":"lcd","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true},"pluginVersion":"7.2.2","targets":[{"expr":"avg(100-aerospike_namespace_device_available_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Device Used","refId":"A"},{"expr":"avg(100-aerospike_namespace_pmem_available_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"PMEM Used","refId":"B"}],"timeFrom":null,"timeShift":null,"title":"% Storage Used","type":"bargauge"},{"aliasColors":{"% Disk Used":"blue","% High Water Mark":"semi-dark-orange","% Stop Writes":"dark-red","Available Used %":"purple","Free Used %":"blue","High Water Mark":"semi-dark-orange","High Water Mark %":"semi-dark-orange","Stop Writes":"dark-red","Stop Writes %":"dark-red","Used %":"blue","Used % (Available)":"blue","Used % (Free)":"purple"},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace device usage trend","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":6,"w":12,"x":12,"y":7},"hiddenSeries":false,"id":27,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"","yaxis":1}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(100-aerospike_namespace_device_free_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"Used % (100 - device_free_pct)","refId":"A"},{"expr":"avg(100-aerospike_namespace_device_available_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","intervalFactor":1,"legendFormat":"Used % (100 - device_available_pct)","refId":"D"},{"expr":"avg(aerospike_namespace_high_water_disk_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"Device High Water Mark %","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"% Device Trend","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace free disk space ((device_free_pct \/ 100) * device_total_bytes)\n\nNamespace device total size in bytes\n\nNamespace device available space in bytes ((device_available_pct\/100) * device_total_bytes)\n\nNamespace free pmem space ((pmem_free_pct \/ 100) * pmem_total_bytes)\n\nNamespace pmem total size in bytes\n\nNamespace pmem available space in bytes ((pmem_available_pct\/100) * pmem_total_bytes)","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":10},"id":288,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"avg(aerospike_namespace_device_total_bytes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})*(avg(aerospike_namespace_device_free_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})\/100)","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Device Free","refId":"A"},{"expr":"avg(aerospike_namespace_device_total_bytes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Device Total","refId":"B"},{"expr":"avg(aerospike_namespace_device_total_bytes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})*(avg(aerospike_namespace_device_available_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})\/100)","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Device Available","refId":"C"},{"expr":"avg(aerospike_namespace_pmem_total_bytes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})*(avg(aerospike_namespace_pmem_free_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})\/100)","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"PMEM Free","refId":"D"},{"expr":"avg(aerospike_namespace_pmem_total_bytes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"PMEM Total","refId":"E"},{"expr":"avg(aerospike_namespace_pmem_total_bytes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})*(avg(aerospike_namespace_pmem_available_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})\/100)","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"PMEM Available","refId":"F"}],"timeFrom":null,"timeShift":null,"title":"Namespace Storage Statistics","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace dead or unavailable partitions","fieldConfig":{"defaults":{"custom":{},"decimals":0,"mappings":[{"from":"","id":1,"text":"N\/A","to":"","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"#E02F44","value":1},{"color":"#E02F44"}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":12},"id":358,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_dead_partitions{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Dead Partitions","refId":"A"},{"expr":"sum(aerospike_namespace_unavailable_partitions{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Unavailable Partitions","refId":"B"}],"timeFrom":null,"timeShift":null,"title":"Partitions","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Percentage of device space used by primary index (for flash and PMEM)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{},"decimals":0,"mappings":[{"from":"","id":1,"text":"N\/A","to":"","type":1,"value":"null"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-orange","value":80},{"color":"dark-red","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":13},"id":305,"links":[],"options":{"displayMode":"lcd","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true},"pluginVersion":"7.2.2","targets":[{"expr":"avg(aerospike_namespace_index_flash_used_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"intervalFactor":1,"legendFormat":"Flash","refId":"A"},{"expr":"avg(aerospike_namespace_index_pmem_used_pct{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"intervalFactor":1,"legendFormat":"PMEM","refId":"B"}],"timeFrom":null,"timeShift":null,"title":"% Primary Index Device Used (Flash\/PMEM)","type":"bargauge"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace index flash usage in bytes\n\nNamespace index PMEM usage in bytes","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":12,"y":13},"id":345,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"avg(aerospike_namespace_index_flash_used_bytes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Flash","refId":"A"},{"expr":"avg(aerospike_namespace_index_pmem_used_bytes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"PMEM","refId":"B"}],"timeFrom":null,"timeShift":null,"title":"Namespace Index (Flash\/PMEM) Statistics","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace stop_writes flag","fieldConfig":{"defaults":{"custom":{},"decimals":0,"mappings":[{"from":"null","id":0,"text":"N\/A","to":"null","type":2},{"from":"0","id":1,"text":"OK","to":"0","type":2},{"from":"1","id":2,"text":"CRITICAL","to":"1000","type":2}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"#E02F44","value":1},{"color":"#E02F44"}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":18,"y":13},"id":113,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_stop_writes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Stop Writes","refId":"A"},{"expr":"sum(aerospike_namespace_clock_skew_stop_writes{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Clock Skew Stop Writes","refId":"B"},{"expr":"sum(aerospike_namespace_hwm_breached{cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"HWM Breached","refId":"C"}],"timeFrom":null,"timeShift":null,"title":"Stop Writes \/ HWM Breached","type":"stat"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":32},"id":181,"panels":[],"title":"Throughput (Read, Write)","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Shows per-second average rate of increase in\n\n1. Total reads = client_read_success + client_read_error + client_read_timeout + client_read_not_found\n2. Successful reads = client_read_success\n3. Errored reads = clean_read_error\n4. Timedout reads = client_read_timeout\n5. Not found = client_read_not_found","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":9,"w":12,"x":0,"y":33},"hiddenSeries":false,"hideTimeOverride":false,"id":177,"interval":"","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_namespace_client_read_success{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+rate(aerospike_namespace_client_read_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+rate(aerospike_namespace_client_read_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+rate(aerospike_namespace_client_read_not_found{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Total","refId":"B"},{"expr":"rate(aerospike_namespace_client_read_success{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Successful","refId":"A"},{"expr":"rate(aerospike_namespace_client_read_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Error","refId":"C"},{"expr":"rate(aerospike_namespace_client_read_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Timeout","refId":"D"},{"expr":"rate(aerospike_namespace_client_read_not_found{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Not Found","refId":"E"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Client Reads (TPS)","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"TPS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"TPS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Shows per-second average rate of increase in\n\n1. Total writes = client_write_success + client_write_error + client_write_timeout\n2. Successful writes = client_write_success\n3. Errored writes = clean_write_error\n4. Timedout writes = client_write_timeout","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":9,"w":12,"x":12,"y":33},"hiddenSeries":false,"id":179,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_namespace_client_write_success{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+rate(aerospike_namespace_client_write_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+rate(aerospike_namespace_client_write_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Total","refId":"B"},{"expr":"rate(aerospike_namespace_client_write_success{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Successful","refId":"A"},{"expr":"rate(aerospike_namespace_client_write_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Timeout","refId":"C"},{"expr":"rate(aerospike_namespace_client_write_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Error","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Client Writes (TPS)","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"TPS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"TPS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":42},"id":191,"panels":[],"title":"Throughput (Batch, Query, Scan, UDF)","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Shows per-second average rate of increase in batch_sub_read_success, batch_sub_read_not_found, batch_sub_read_error and batch_sub_read_timeout","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":10,"w":12,"x":0,"y":43},"hiddenSeries":false,"hideTimeOverride":false,"id":183,"interval":"","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_namespace_batch_sub_read_success{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}: Total","refId":"B"},{"expr":"rate(aerospike_namespace_batch_sub_read_not_found{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}: Not Found","refId":"C"},{"expr":"rate(aerospike_namespace_batch_sub_read_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}: Error","refId":"D"},{"expr":"rate(aerospike_namespace_batch_sub_read_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","legendFormat":"{{ "{{" }}service{{ "}}" }}: Timeout","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Batch Sub Reads ","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"TPS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"TPS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Shows per-second average rate of increase in\n\n1. Total (_complete + _error) scans\n2. Successful (_complete) scans\n3. Errored (_error) scans\n4. Aborted (_abort) scans\n\nIt includes all 4 types of scans -  scan_basic, scan_aggr, scan_udf_bg, and scan_ops_bg and rate is computed over the last minute.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":10,"w":12,"x":12,"y":43},"hiddenSeries":false,"hideTimeOverride":false,"id":185,"interval":"","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_namespace_scan_aggr_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_basic_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_udf_bg_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_ops_bg_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_udf_bg_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_aggr_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_basic_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_ops_bg_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Total","refId":"B"},{"expr":"rate(aerospike_namespace_scan_aggr_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_basic_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_udf_bg_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_ops_bg_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Successful","refId":"A"},{"expr":"rate(aerospike_namespace_scan_udf_bg_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_aggr_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_basic_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_ops_bg_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Error","refId":"C"},{"expr":"rate(aerospike_namespace_scan_aggr_abort{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_basic_abort{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_udf_bg_abort{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_scan_ops_bg_abort{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Abort","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Scans (TPS)","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"TPS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"TPS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Shows per-second average rate of increase in\n\n1. Total (query_reqs),\n2. Successful (query_reqs - query_fail),\n3. Error (query_fail)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":10,"w":12,"x":0,"y":53},"hiddenSeries":false,"hideTimeOverride":false,"id":187,"interval":"","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_namespace_query_reqs{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Total","refId":"B"},{"expr":"rate(aerospike_namespace_query_reqs{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])-rate(aerospike_namespace_query_fail{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Successful","refId":"A"},{"expr":"rate(aerospike_namespace_query_fail{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Error","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Queries (TPS)","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"TPS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"TPS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Shows per-second average rate of increase in \n\n1. Total = client_udf_complete + client_udf_timeout + client_udf_error\n2. Successful = client_udf_complete\n3. Error = client_udf_error\n4. Timeout = client_udf_timeout","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":10,"w":12,"x":12,"y":53},"hiddenSeries":false,"hideTimeOverride":false,"id":189,"interval":"","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_namespace_client_udf_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_client_udf_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])+\nrate(aerospike_namespace_client_udf_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Total","refId":"A"},{"expr":"rate(aerospike_namespace_client_udf_complete{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Successful","refId":"B"},{"expr":"rate(aerospike_namespace_client_udf_error{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Error","refId":"C"},{"expr":"rate(aerospike_namespace_client_udf_timeout{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}[1m])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Timeout","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"UDFs (TPS)","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"TPS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"TPS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":63},"id":211,"panels":[],"title":"Objects","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace master objects","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":64},"hiddenSeries":false,"hideTimeOverride":false,"id":195,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_master_objects{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Master Objects","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace replica objects","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":64},"hiddenSeries":false,"hideTimeOverride":false,"id":199,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_prole_objects{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Prole Objects","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace non-replica objects","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":64},"hiddenSeries":false,"hideTimeOverride":false,"id":197,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_non_replica_objects{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Non-Replica Objects","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace master tombstones","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":72},"hiddenSeries":false,"hideTimeOverride":false,"id":201,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_master_tombstones{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Master Tombstones","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace replica tombstones","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":72},"hiddenSeries":false,"hideTimeOverride":false,"id":203,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_prole_tombstones{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Prole Tombstones","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace non-replica tombstones","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":72},"hiddenSeries":false,"hideTimeOverride":false,"id":205,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_non_replica_tombstones{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Non-Replica Tombstones","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace evicted objects","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":80},"hiddenSeries":false,"hideTimeOverride":false,"id":207,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_evicted_objects{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Evicted Objects","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace expired objects","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":80},"hiddenSeries":false,"hideTimeOverride":false,"id":209,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_expired_objects{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Expired Objects","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace migrate_tx_partitions_remaining (transmit) and migrate_rx_partitions_remaining (receive)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":80},"hiddenSeries":false,"hideTimeOverride":false,"id":193,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_migrate_tx_partitions_remaining{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"Outgoing {{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"B"},{"expr":"sum(aerospike_namespace_migrate_rx_partitions_remaining{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"Incoming {{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Migrations Remaining","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":88},"id":259,"panels":[],"title":"Resources","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace Index Usage (Primary Index)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":89},"hiddenSeries":false,"hideTimeOverride":false,"id":257,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_memory_used_index_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"shmem {{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"A"},{"expr":"sum(aerospike_namespace_index_flash_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"flash {{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"B"},{"expr":"sum(aerospike_namespace_index_pmem_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"pmem {{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Primary Index Used","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace memory_used_sindex_bytes (Secondary Index)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":89},"hiddenSeries":false,"hideTimeOverride":false,"id":255,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_memory_used_sindex_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Secondary Index Used","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"Namespace fail_generation (Errors due to generation mismatch), fail_key_busy (Hotkey errors), fail_record_too_big (Errors due to record being more that write block size), fail_xdr_forbidden (Forbidden errors due to XDR configs for incoming XDR traffic)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":89},"hiddenSeries":false,"hideTimeOverride":false,"id":253,"interval":"","legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_fail_generation{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Fail Generation","refId":"B"},{"expr":"sum(aerospike_namespace_fail_key_busy{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Key Busy","refId":"A"},{"expr":"sum(aerospike_namespace_fail_record_too_big{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Record Too Big","refId":"C"},{"expr":"sum(aerospike_namespace_fail_xdr_forbidden{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}) by (service, ns)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: XDR Forbidden","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Failure Rate","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace memory_free_pct (available namespace memory percentage), high_water_memory_pct (memory high water mark), stop_writes_pct (stop writes threshold)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":97},"hiddenSeries":false,"hideTimeOverride":false,"id":251,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_namespace_memory_free_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Free","refId":"B"},{"expr":"aerospike_namespace_high_water_memory_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: HWM","refId":"A"},{"expr":"aerospike_namespace_stop_writes_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}: Stop Writes","refId":"C"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Info %","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"percent","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace memory_used_bytes (memory_used_data_bytes (Data) + memory_used_index_bytes (Primary Index) + memory_used_sindex_bytes (Secondary Index))","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":97},"hiddenSeries":false,"hideTimeOverride":false,"id":249,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_namespace_memory_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"Used {{ "{{" }}service{{ "}}" }}\/{{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Used","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace free memory = memory_size - memory_used_bytes","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":97},"hiddenSeries":false,"hideTimeOverride":false,"id":247,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_namespace_memory_size{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"} - aerospike_namespace_memory_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Free","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace storage free percentage (device_free_pct or pmem_free_pct)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":105},"hiddenSeries":false,"hideTimeOverride":false,"id":245,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_namespace_device_free_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"device {{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"B"},{"expr":"aerospike_namespace_pmem_free_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"pmem {{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Storage Free %","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"percent","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace storage usage in bytes (device_used_bytes or pmem_used_bytes)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":105},"hiddenSeries":false,"hideTimeOverride":false,"id":243,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_namespace_device_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"device {{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"B"},{"expr":"aerospike_namespace_pmem_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"pmem {{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Storage Used","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Namespace storage free bytes (device_total_bytes - device_used_bytes or pmem_total_bytes - pmem_used_bytes)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":105},"hiddenSeries":false,"hideTimeOverride":false,"id":241,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_namespace_device_total_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"} - aerospike_namespace_device_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"device {{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"A"},{"expr":"aerospike_namespace_pmem_total_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"} - aerospike_namespace_pmem_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"pmem {{ "{{" }}service{{ "}}" }} {{ "{{" }}ns{{ "}}" }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Storage Free","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","hide":0,"includeAll":false,"label":"Cluster","multi":false,"name":"cluster","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","hide":0,"includeAll":true,"label":"Node","multi":true,"name":"node","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },ns)","hide":0,"includeAll":true,"label":"Namespace","multi":true,"name":"namespace","options":[],"query":"label_values(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },ns)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"Aerospike Prometheus","value":"Aerospike Prometheus"},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"DS_AEROSPIKE_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Namespace View","uid":"zGcUKcDZz","version":1}

  node.json: |
    {"__requires":[{"type":"panel","id":"gauge","name":"Gauge","version":""},{"type":"grafana","id":"grafana","name":"Grafana","version":"7.2.2"},{"type":"panel","id":"graph","name":"Graph","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""},{"type":"panel","id":"table","name":"Table","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1603786992057,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":4,"panels":[],"title":"Node List","type":"row"},{"datasource":"${DS_AEROSPIKE_PROMETHEUS}","fieldConfig":{"defaults":{"custom":{"align":"center","displayMode":"color-background","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]}},"overrides":[]},"gridPos":{"h":9,"w":24,"x":0,"y":1},"id":2,"links":[],"options":{"showHeader":true},"pluginVersion":"7.2.2","targets":[{"expr":"aerospike_node_up{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\"}","format":"table","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Nodes","transformations":[{"id":"organize","options":{"excludeByName":{"Value":true,"__name__":true,"job":true},"indexByName":{},"renameByName":{"Value":"","build":"Build","cluster_name":"Cluster Name","instance":"Exporter Instance","service":"Aerospike Instance"}}}],"type":"table"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":10},"id":6,"panels":[],"repeat":"node","title":"$node","type":"row"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Exporter and Aerospike node status","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"},{"id":1,"op":"=","text":"UP","type":1,"value":"1"},{"id":2,"op":"=","text":"DOWN","type":1,"value":"0"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"dark-red","value":null},{"color":"#299c46","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":0,"y":11},"id":69,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"min(up{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$service|$^\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Exporter","refId":"A"},{"expr":"aerospike_node_up{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"}","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Aerospike","refId":"B"}],"timeFrom":null,"timeShift":null,"title":"Status","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Total records and tombstones count","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":4,"y":11},"id":43,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Records","refId":"A"},{"expr":"sum(aerospike_namespace_tombstones{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Tomstones","refId":"B"}],"timeFrom":null,"timeShift":null,"title":"Node Namespace Stats","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Total namespace memory size\nTotal namespace memory used\nTotal namespace device size\nTotal namespace device used","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":4,"w":8,"x":8,"y":11},"id":18,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"sum(aerospike_namespace_memory_size{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Total Memory Size","refId":"A"},{"expr":"sum(aerospike_namespace_memory_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Memory Used","refId":"B"},{"expr":"sum(aerospike_namespace_device_total_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Total Device Size","refId":"C"},{"expr":"sum(aerospike_namespace_device_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Device Used","refId":"D"},{"expr":"sum(aerospike_namespace_pmem_total_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Total PMEM Size","refId":"E"},{"expr":"sum(aerospike_namespace_pmem_used_bytes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"PMEM Used","refId":"F"}],"timeFrom":null,"timeShift":null,"title":"Node Namespace Stats","type":"stat"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"UDF transactions per second","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":11},"hiddenSeries":false,"id":100,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(aerospike_latencies_udf_${latencytimeunit}_bucket{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\", le=~\"[0-9]*\"}) by (le)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"<={{ "{{" }}le{{ "}}" }}${latencytimeunit}","refId":"A"},{"expr":"avg(aerospike_latencies_udf_${latencytimeunit}_count{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","legendFormat":"Ops\/sec","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Latency: UDF \/ sec","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Alert count","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"0","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":0,"y":15},"id":9,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"ALERTS{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"}","format":"time_series","instant":true,"intervalFactor":1,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Alerts","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Client\/Heartbeat\/Fabric connections count","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":4,"y":15},"id":14,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.2.2","targets":[{"expr":"aerospike_node_stats_client_connections{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"}","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Client","refId":"A"},{"expr":"aerospike_node_stats_heartbeat_connections{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"}","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Heartbeat","refId":"B"},{"expr":"aerospike_node_stats_fabric_connections{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"}","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Fabric","refId":"C"}],"timeFrom":null,"timeShift":null,"title":"Connections","type":"stat"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Minimum of the Namespaces' Memory\/Device Free Percentage","fieldConfig":{"defaults":{"custom":{},"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"max":100,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"dark-red","value":null},{"color":"dark-orange","value":10},{"color":"#299c46","value":5}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":8,"x":8,"y":15},"id":24,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"7.2.2","targets":[{"expr":"min(aerospike_namespace_memory_free_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Memory Free","refId":"A"},{"expr":"min(aerospike_namespace_device_free_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"Device Free","refId":"B"},{"expr":"min(aerospike_namespace_pmem_free_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"PMEM Free","refId":"C"}],"timeFrom":null,"timeShift":null,"title":"Node Namespace Stats","type":"gauge"},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Reads per second","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":19},"hiddenSeries":false,"id":83,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(aerospike_latencies_read_${latencytimeunit}_bucket{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\", le=~\"[0-9]*\"}) by (le)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"<={{ "{{" }}le{{ "}}" }}${latencytimeunit}","refId":"A"},{"expr":"avg(aerospike_latencies_read_${latencytimeunit}_count{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","legendFormat":"Ops\/sec","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Latency: Reads \/ sec","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Writes per second","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":19},"hiddenSeries":false,"id":98,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(aerospike_latencies_write_${latencytimeunit}_bucket{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\", le=~\"[0-9]*\"}) by (le)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"<={{ "{{" }}le{{ "}}" }}${latencytimeunit}","refId":"A"},{"expr":"avg(aerospike_latencies_write_${latencytimeunit}_count{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","legendFormat":"Ops\/sec","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Latency: Writes \/ sec","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Proxies per second","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":19},"hiddenSeries":false,"id":99,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(aerospike_latencies_proxy_${latencytimeunit}_bucket{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\", le=~\"[0-9]*\"}) by (le)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"<={{ "{{" }}le{{ "}}" }}${latencytimeunit}","refId":"A"},{"expr":"avg(aerospike_latencies_proxy_${latencytimeunit}_count{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","legendFormat":"Ops\/sec","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Latency: Proxies \/ sec","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Queries per second","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":27},"hiddenSeries":false,"id":101,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(aerospike_latencies_query_${latencytimeunit}_bucket{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\", le=~\"[0-9]*\"}) by (le)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"<={{ "{{" }}le{{ "}}" }}${latencytimeunit}","refId":"A"},{"expr":"avg(aerospike_latencies_query_${latencytimeunit}_count{job=\"aerospike\",cluster_name=~\"$cluster\", service=~\"$node|$^\", ns=~\"$namespace|$^\"})","legendFormat":"Ops\/sec","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Latency: Query \/ sec","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Client connections, fabric connections and heartbeat connections","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":8,"y":27},"hiddenSeries":false,"id":120,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_node_stats_client_connections{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"Client Connections","refId":"A"},{"expr":"aerospike_node_stats_fabric_connections{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\"}","format":"time_series","intervalFactor":1,"legendFormat":"Fabric Connections","refId":"B"},{"expr":"aerospike_node_stats_heartbeat_connections{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\"}","format":"time_series","intervalFactor":1,"legendFormat":"Heartbeat Connections","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Connections","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Migrations remaining migrate_tx_partitions_remaining (transmit), migrate_rx_partitions_remaining (receive)","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":16,"y":27},"hiddenSeries":false,"id":44,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(aerospike_namespace_migrate_rx_partitions_remaining{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"Incoming Partitions Remaining","refId":"A"},{"expr":"sum(aerospike_namespace_migrate_tx_partitions_remaining{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\"})","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"Outgoing Partitions Remaining","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Migrations (Partitions Remaining)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"cacheTimeout":null,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Master objects, prole objects and tombstones","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":8,"x":0,"y":35},"hiddenSeries":false,"id":161,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_namespace_master_objects{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ "{{" }}ns{{ "}}" }}\/Master","refId":"A"},{"expr":"aerospike_namespace_prole_objects{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}ns{{ "}}" }}\/Prole","refId":"B"},{"expr":"aerospike_namespace_tombstones{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{ "{{" }}ns{{ "}}" }}\/Tombstones","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Object Count","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true},{"decimals":0,"format":"short","label":"Count","logBase":1,"max":null,"min":"0","show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","hide":0,"includeAll":false,"label":"Cluster","multi":false,"name":"cluster","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","hide":0,"includeAll":true,"label":"Node","multi":true,"name":"node","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },ns)","hide":0,"includeAll":true,"label":"Namespace","multi":true,"name":"namespace","options":[],"query":"label_values(aerospike_namespace_objects{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },ns)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"metrics(aerospike_latencies_)","hide":0,"includeAll":false,"label":"Latency Time Unit","multi":false,"name":"latencytimeunit","options":[],"query":"metrics(aerospike_latencies_)","refresh":2,"regex":"\/.*aerospike_latencies_[a-z]*_([a-z]*)_count\/","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"Aerospike Prometheus","value":"Aerospike Prometheus"},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"DS_AEROSPIKE_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Node Overview","uid":"UcZD2iHAk","version":1}

  xdr.json: |
    {"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"7.3.7"},{"type":"panel","id":"graph","name":"Graph","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1611740627455,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":30,"panels":[],"title":"Overview","type":"row"},{"cacheTimeout":null,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Total Throughput (sum across all namespaces and all DCs)\n\nAverage XDR Lag\n\nAverage Ship Latency\n\nAverage Lap us (Time taken to process records across partitions in one lap)\n\nTotal recoveries pending\n\nTotal In Progress\n\nTotal In Queue","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[{"id":0,"op":"=","text":"N\/A","type":1,"value":"null"}],"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null}]},"unit":"short"},"overrides":[{"matcher":{"id":"byName","options":"Avg Lag"},"properties":[{"id":"unit","value":"s"},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-red","value":10}]}}]},{"matcher":{"id":"byName","options":"Avg Ship Latency"},"properties":[{"id":"unit","value":"ms"}]},{"matcher":{"id":"byName","options":"Avg Lap us"},"properties":[{"id":"unit","value":"\u00b5s"}]}]},"gridPos":{"h":4,"w":24,"x":0,"y":1},"id":34,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.7","targets":[{"expr":"sum(aerospike_xdr_throughput{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"})","interval":"","legendFormat":"Total Throughput","refId":"A"},{"expr":"avg(aerospike_xdr_lag{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"})","interval":"","legendFormat":"Avg Lag","refId":"B"},{"expr":"avg(aerospike_xdr_latency_ms{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"})","interval":"","legendFormat":"Avg Ship Latency","refId":"C"},{"expr":"avg(aerospike_xdr_lap_us{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"})","interval":"","legendFormat":"Avg Lap us","refId":"D"},{"expr":"sum(aerospike_xdr_recoveries_pending{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"})","interval":"","legendFormat":"Total Recoveries Pending","refId":"E"},{"expr":"sum(aerospike_xdr_in_progress{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"})","interval":"","legendFormat":"Total In Progress","refId":"F"},{"expr":"sum(aerospike_xdr_in_queue{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"})","interval":"","legendFormat":"Total In Queue","refId":"G"}],"timeFrom":null,"timeShift":null,"title":"XDR Statistics Summary","type":"stat"},{"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Number of nodes in the destination DC as seen by XDR (Average)","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{},"decimals":1,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"red","value":0},{"color":"#299c46","value":3}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":24,"x":0,"y":5},"id":36,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.3.7","targets":[{"expr":"avg(aerospike_xdr_nodes{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node\", dc=~\"$dc\"}) by (dc)","format":"time_series","instant":true,"interval":"","legendFormat":"{{ "{{" }}dc{{ "}}" }}","queryType":"randomWalk","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"DC Nodes","type":"stat"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":9},"id":32,"panels":[],"title":"Detailed Statistics","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":0,"description":"XDR throughput","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":10},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_throughput{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"Throughput {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Throughput","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR THROUGHPUT","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR THROUGHPUT","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":null,"description":"Number of records successfully shipped","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":10},"hiddenSeries":false,"id":4,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_xdr_success{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}[1m])","legendFormat":"Success {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Success","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR  SHIP SUCCESS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"XDR  SHIP SUCCESS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":null,"description":"Number of ships abandoned","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":18},"hiddenSeries":false,"id":17,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_xdr_abandoned{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}[1m])","legendFormat":"Abandoned {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Abandoned","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR  SHIP ABANDONED","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"XDR  SHIP ABANDONED","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":null,"description":"Number of XDR local read not found","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":18},"hiddenSeries":false,"id":18,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_xdr_not_found{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}[1m])","legendFormat":"Not found {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Not Found","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR NOT FOUND","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"XDR NOT FOUND","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":null,"description":"How many records are skipped after XDR reading the record locally but before putting them on wire","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":26},"hiddenSeries":false,"id":19,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_xdr_filtered_out{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}[1m])","legendFormat":"Filtered out {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Filtered Out","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR  FILTERED OUT","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"XDR  FILTERED OUT","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":null,"description":"Number of retries due to connection reset","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":26},"hiddenSeries":false,"id":22,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_xdr_retry_conn_reset{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}[1m])","legendFormat":"Retry Conn Reset {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Retry Connection Reset","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR  RETRY CONN RESET","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"XDR  RETRY CONN RESET","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":null,"description":"Number of retries due to temporary error from destination","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":34},"hiddenSeries":false,"id":21,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_xdr_retry_dest{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}[1m])","legendFormat":"Retry Destination {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Retry Destination","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR  RETRY DESTINATION","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"XDR  RETRY DESTINATION","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":null,"description":"Number of times a record write is skipped from processing because that record is already pending processing","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":34},"hiddenSeries":false,"id":24,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_xdr_hot_keys{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}[1m])","legendFormat":"Hot keys {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Hot Keys","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR HOT KEYS","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"XDR HOT KEYS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Number of XDR processing record in progress","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":42},"hiddenSeries":false,"id":14,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_in_progress{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"In Progress {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"In Progress","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR IN-PROGRESS","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR IN-PROGRESS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Number of records waiting to be processed in in-memory transaction queue","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":42},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_in_queue{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"In queue {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"In Queue","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR IN-QUEUE","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR IN-QUEUE","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"It signifies how much behind the destination is compared to the source. In other words, so much time worth of data is yet to be shipped from source to destination","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":50},"hiddenSeries":false,"id":16,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_lag{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"Lag {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Lag","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR LAG","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR LAG","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Time taken to process records across partitions in one lap. A higher number indicates slowness of source in processing the records.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":50},"hiddenSeries":false,"id":25,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_lap_us{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"Lap \u03bcs {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Lap \u03bcs","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR LAP \u03bcS","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR LAP \u03bcS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","decimals":null,"description":"Number of partitions that are recovered by reducing the primary index of that partition","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":58},"hiddenSeries":false,"id":20,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(aerospike_xdr_recoveries{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}[1m])","legendFormat":"Recoveries {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Recoveries","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR  RECOVERIES","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":"XDR  RECOVERIES","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Number of recoveries that are currently pending","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":58},"hiddenSeries":false,"id":23,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_recoveries_pending{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"Recoveries pending {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Recoveries Pending","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR RECOVERIES PENDING","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR RECOVERIES PENDING","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Average network latency for the successfully shipped records","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":66},"hiddenSeries":false,"id":26,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_latency_ms{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"Latency ms {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Latency ms","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR AVG SHIP LATENCY MS","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR AVG SHIP LATENCY MS","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"Average XDR compression ratio","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":12,"y":66},"hiddenSeries":false,"id":27,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_compression_ratio{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"Avg compression ratio {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Avg Compression Ratio","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR AVG COMPRESSION RATIO","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR AVG COMPRESSION RATIO","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_AEROSPIKE_PROMETHEUS}","description":"How much % of records are not compressed because they are below the compression threshold","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":5,"gridPos":{"h":8,"w":12,"x":0,"y":74},"hiddenSeries":false,"id":28,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"aerospike_xdr_uncompressed_pct{job=\"aerospike\", cluster_name=~\"$cluster\", service=~\"$node|$^\", dc=~\"$dc|$^\"}","legendFormat":"Uncompressed pct {{ "{{" }}service{{ "}}" }} {{ "{{" }}dc{{ "}}" }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Uncompressed Pct","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"XDR AVG UNCOMPRESSED PCT","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"XDR AVG UNCOMPRESSED PCT","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","error":null,"hide":0,"includeAll":true,"label":"Cluster","multi":true,"name":"cluster","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\"},cluster_name)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","error":null,"hide":0,"includeAll":true,"label":"Node","multi":true,"name":"node","options":[],"query":"label_values(aerospike_node_stats_uptime{job=\"aerospike\", cluster_name=~\"$cluster|$^\"},service)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_AEROSPIKE_PROMETHEUS}","definition":"label_values(aerospike_xdr_lap_us{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },dc)","error":null,"hide":0,"includeAll":true,"label":"DC","multi":true,"name":"dc","options":[],"query":"label_values(aerospike_xdr_lap_us{job=\"aerospike\", cluster_name=~\"$cluster|$^\", service=~\"$node|$^\" },dc)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"Aerospike Prometheus","value":"Aerospike Prometheus"},"error":null,"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"DS_AEROSPIKE_PROMETHEUS","options":[],"query":"prometheus","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"XDR View (Aerospike 5.0+ only)","uid":"hU_4PTqWk","version":1}
---

apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-grafana-provisioning-dashboards
  namespace: {{ .Release.Namespace }}
  labels:
    app: {{ template "aerospike.name" . }}-grafana
    chart: {{ .Chart.Name }}
    release: {{ .Release.Name }}
    app.kubernetes.io/component: grafana
data:
  all.yaml: |-
    apiVersion: 1
    providers:
      - name: 'default'
        # <int> org id. will default to orgId 1 if not specified
        # orgId: 1
        # <string, required> name of the dashboard folder. Required
        folder: 'Aerospike'
        # <string> folder UID. will be automatically generated if not specified
        folderUid: 'aerospike1'
        # <string, required> provider type. Required
        type: file
        # <bool> disable dashboard deletion
        disableDeletion: false
        # <bool> enable dashboard editing
        editable: true
        # <int> how often Grafana will scan for changed dashboards
        updateIntervalSeconds: 10
        options:
          # <string, required> path to dashboard files on disk. Required
          path: /var/lib/grafana/dashboards
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-grafana-provisioning-datasources
  namespace: {{ .Release.Namespace }}
  labels:
    app: {{ template "aerospike.name" . }}-grafana
    chart: {{ .Chart.Name }}
    release: {{ .Release.Name }}
    app.kubernetes.io/component: grafana
data:
  all.yaml: |-
    apiVersion: 1
    datasources:
      - name: "Aerospike Prometheus Alertmanager"
        type: camptocamp-prometheus-alertmanager-datasource
        access: proxy
        # orgId: 1
        url: http://{{ .Release.Name }}-alertmanager:{{ .Values.alertmanager.webPort | default 9093 }}
        editable: true
        isDefault: false

      - name: "Aerospike Prometheus"
        type: prometheus
        access: proxy
        # orgId: 1
        url: http://{{ .Release.Name }}-prometheus:{{ .Values.prometheus.serverPort | default 9090 }}
        editable: true
        isDefault: false
{{- end }}
